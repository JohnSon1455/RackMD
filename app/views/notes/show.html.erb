<div><%= link_to "回筆記列表", notes_path %></div>

<% if Collection.exists?(note: @note) %>
  <div class="collection-btn collection-on",
    data-controller="collect",
    data-action="click->collect#toggle",
    data-collect-target="btn",
    data-collect-id-value="<%= @note.id %>">
    <a href="#">加入收藏</a>
  </div>
<% else %>
  <div class="collection-btn collection-off",
    data-controller="collect",
    data-action="click->collect#toggle",
    data-collect-target="btn",
    data-collect-id-value="<%= @note.id %>">
    <a href="#">加入收藏</a>
  </div>
<% end %>

<div data-controller="favorite" 
     data-favorite-id-value="<%= @note.id %>">
  <a href="#"
     id = "favorite_btn"
     data-action="favorite#toggleFavorite"
     data-id="<%= @note.id %>">
    <%= favorite_icon(current_user, @note) %>讚賞 
  </a><span data-favorite-target='counter' ><%= @likes %></span>
</div>
<nav style="background-color: lightgray;">
  <%= link_to "HackMD", notes_path %>
</nav>
  <div>
  <%= form_for(@note) do |f| %>
    <%= f.label :tag_list, "標籤" %> 
    <%= f.text_field :tag_list %> 
  </div>
<div>
  標題：<%= @note.title %>
  <br>
  內容：<%= @note.content %>
</div>
<div id="editor" data-controller="autosave" 
    data-autosave-id-value="<%= @note.id %>" 
    data-action="keyup->autosave#updateValue">
    <%= f.text_field :title %>
    <%= f.text_field :content %>
    <%= f.submit %>
<% end %>
</div>
  <div data-controller="commentToggle" class="flex">
    <button class="bg-white text-base w-8 h-8" data-action="commentToggle#toggle">
      <i class="fas fa-comment-dots"></i>
    </button>
    <div data-commentToggle-target="display" style="display: none;">
      <%= render "createComment" %>
      <div id="comments">
        <%= render "comments" %>
      </div>
    </div>
  </div>
</div>